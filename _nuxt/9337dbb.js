(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{513:function(t,e,n){var content=n(521);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("0dca5f8e",content,!0,{sourceMap:!1})},520:function(t,e,n){"use strict";n(513)},521:function(t,e,n){(e=n(17)(!1)).push([t.i,'.leaflet-cluster-anim .leaflet-marker-icon,.leaflet-cluster-anim .leaflet-marker-shadow{transition:transform .3s ease-out,opacity .3s ease-in}.leaflet-cluster-spider-leg{transition:stroke-dashoffset .3s ease-out,stroke-opacity .3s ease-in}.marker-cluster-small{background-color:rgba(181,226,140,.6)}.marker-cluster-small div{background-color:rgba(110,204,57,.6)}.marker-cluster-medium{background-color:rgba(241,211,87,.6)}.marker-cluster-medium div{background-color:rgba(240,194,12,.6)}.marker-cluster-large{background-color:rgba(253,156,115,.6)}.marker-cluster-large div{background-color:rgba(241,128,23,.6)}.leaflet-oldie .marker-cluster-small{background-color:#b5e28c}.leaflet-oldie .marker-cluster-small div{background-color:#6ecc39}.leaflet-oldie .marker-cluster-medium{background-color:#f1d357}.leaflet-oldie .marker-cluster-medium div{background-color:#f0c20c}.leaflet-oldie .marker-cluster-large{background-color:#fd9c73}.leaflet-oldie .marker-cluster-large div{background-color:#f18017}.marker-cluster{background-clip:padding-box;border-radius:20px}.marker-cluster div{width:30px;height:30px;margin-left:5px;margin-top:5px;text-align:center;border-radius:15px;font:12px "Helvetica Neue",Arial,Helvetica,sans-serif}.marker-cluster span{line-height:30px}',""]),t.exports=e},524:function(t,e,n){"use strict";n(306);var r=n(27),o=n(42),l=n(35),c=n(28),h=n(13),f=n(179);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var d=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l},v={};v=n(533);var y=function(t){Object(o.a)(n,t);var e=m(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).tileProviders=[{name:"OpenStreetMap",visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"OpenTopoMap",visible:!1,url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}],t}return n}(f.Vue);d([Object(f.Prop)()],y.prototype,"markers",void 0),d([Object(f.Prop)({default:1})],y.prototype,"zoom",void 0),d([Object(f.Prop)({default:[]})],y.prototype,"center",void 0);var j=y=d([Object(f.Component)({components:{"l-marker-cluster":v}})],y),_=(n(520),n(103)),O=n(142),w=n.n(O),R=n(176),component=Object(_.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("client-only",[n("l-map",{staticStyle:{"z-index":"0"},attrs:{zoom:t.zoom,center:t.center}},[n("l-control-layers",{attrs:{position:"topright"}}),t._v(" "),t._l(t.tileProviders,(function(t){return n("l-tile-layer",{key:t.name,attrs:{name:t.name,visible:t.visible,url:t.url,attribution:t.attribution,"layer-type":"base"}})})),t._v(" "),n("l-marker-cluster",t._l(t.markers,(function(marker,e){return n("l-marker",{key:e,attrs:{"lat-lng":marker.latlng}},[n("l-popup",[n("nuxt-link",{attrs:{to:t.localePath(marker.path)}},[t._v(t._s(marker.content))]),t._v(" "),marker.image?[n("v-img",{staticClass:"ma-2",attrs:{"max-height":"150px","min-height":"90px",src:marker.image,contain:""}})]:t._e()],2)],1)})),1)],2)],1)}),[],!1,null,null,null);e.a=component.exports;w()(component,{VImg:R.a})},534:function(t,e,n){"use strict";n(26),n(45),n(14),n(306),n(32),n(231),n(51);var r=n(16),o=n(27),l=n(36),c=n(42),h=n(35),f=n(28),m=n(13),d=n(179),v=n(118),y=n.n(v),j=n(510),_=n(524);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var w=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l},R=function(t){Object(c.a)(h,t);var e,n=O(h);function h(){var t;return Object(o.a)(this,h),(t=n.apply(this,arguments)).results={results_w_thumbnail:[]},t.center=[38,0],t.markers=[],t}return Object(l.a)(h,[{key:"watchU",value:function(){this.init()}},{key:"created",value:function(){this.init()}},{key:"init",value:function(){for(var t in this.results)this.results[t]=[];this.search()}},{key:"getStmt",value:function(u,t){return"agential"===t?'?s jps:agential\n          [jps:relationType/skos:broader?/rdfs:label "制作"; jps:value/owl:sameAs? <'.concat(u,"> ] . "):"?s schema:spatial <".concat(u,"> . ")}},{key:"search",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var u,e,n,r,o,l,c,h,f,m,i,d,label,v,param,marker,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.u,e=this.$i18n.locale,n=this.type,r=this.getStmt(u,n),o="\n        SELECT DISTINCT ?keyword ?label ?name ?lat ?long WHERE { \n          ".concat(r,"\n          ?s schema:spatial ?keyword . \n          FILTER(?keyword != <").concat(u,"> ) . \n          optional { ?keyword schema:geo ?loc. ?loc schema:latitude ?lat ; schema:longitude ?long . } \n          ?keyword rdfs:label ?label . \n\n          ").concat("ja"===e?"":"OPTIONAL {?keyword schema:name ?name . filter (lang(?name) = 'en')}","\n        }\n        ORDER BY RAND()\n        LIMIT ").concat(20,"\n      "),t.next=8,y.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(o)+"&output=json");case 8:for(l=t.sent,c=l.data.results.bindings,h=[],f=0,m=0,i=0;i<c.length;i++)d=c[i],label=d.label.value,label=d.name?d.name.value:label,v={_id:d.keyword.value,to:this.localePath({name:"entity",params:{entity:"spatial"},query:{id:d.keyword.value}}),_source:{_label:label,_url:d.keyword.value,_thumbnail:d.thumbnail?d.thumbnail.value:"https://nakamura196.github.io/jpsearch2/img/icons/tag.png"}},this.results.results_w_thumbnail.push(v),d.lat&&(param={id:d.keyword.value},marker={latlng:[Number(d.lat.value),Number(d.long.value)],content:label,path:{name:"entity",params:{entity:"spatial"},query:param}},d.image&&(marker.image=d.image.value),f+=Number(d.lat.value),m+=Number(d.long.value),h.push(marker));h.length>0&&(j=h.length,this.center=[f/j,m/j]),this.markers=h;case 16:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),h}(d.Vue);w([Object(d.Prop)()],R.prototype,"u",void 0),w([Object(d.Prop)()],R.prototype,"type",void 0),w([Object(d.Watch)("u")],R.prototype,"watchU",null);var k=R=w([Object(d.Component)({components:{HorizontalItems:j.default,Mapc:_.a}})],R),C=n(103),I=n(142),E=n.n(I),x=n(218),P=n(509),component=Object(C.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.results.results_w_thumbnail.length>0?n("v-container",[n("h2",{staticClass:"mt-5 mb-3 text-center"},[t._v(t._s(t.$t("Related place")))]),t._v(" "),n("HorizontalItems",{attrs:{data:t.results.results_w_thumbnail}}),t._v(" "),n("v-card",{staticClass:"my-5 pa-5",attrs:{flat:""}},[n("div",{staticClass:"text-center"},[n("small",[n("h3",{staticClass:"mb-5"},[t._v(t._s(t.$t("map"))+"（"+t._s(t.markers.length)+"）")])])]),t._v(" "),n("div",{staticClass:"my-2",staticStyle:{height:"40vh"},attrs:{id:"map-wrap"}},[n("mapc",{attrs:{markers:t.markers,zoom:2,center:t.center}})],1)])],1):t._e()}),[],!1,null,null,null);e.a=component.exports;E()(component,{HorizontalItems:n(510).default}),E()(component,{VCard:x.a,VContainer:P.a})},535:function(t,e,n){"use strict";n(26),n(45),n(14),n(32),n(52);var r=n(536),o=n(118),l=n.n(o),c={name:"Chart",extends:r.a,props:["query","type","u"],data:function(){return{uris:[],total:0}},watch:{u:function(){this.init()}},created:function(){this.init()},methods:{handle:function(t,e){var n=e[0];if(n){var r=this.uris[n._index],o="keyword"===this.type?"schema:about <".concat(this.u,"> "):"",l="\n        SELECT DISTINCT ?cho ?label ?image WHERE {\n          {\n            ?cho rdfs:label ?label;\n            ".concat(o,"\n          } UNION {\n            ?cho rdfs:label ?label;\n            ?x ?y . ?y <https://jpsearch.go.jp/term/property#value> <").concat(this.u,">\n          }\n          ?cho rdfs:label ?label ;  jps:sourceInfo/schema:provider <").concat(r,"> .\n          OPTIONAL {?cho schema:image ?image}\n        }\n      "),c="https://jpsearch.go.jp/rdf/sparql/easy/?query="+encodeURIComponent(l);open(c,"_blank")}else console.log({point:t})},init:function(){var t=this;this.chartData=[];var e=this.query;l.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(e)+"&output=json").then((function(e){for(var n=e.data.results.bindings,r=[],o=[],l=[],i=0;i<n.length;i++){var c=n[i],h=c.provider.value.split("/"),label=c.pLabel?c.pLabel.value:h[h.length-1];label=c.name?c.name.value:label,r.push(label),o.push(Number(c.c.value)),l.push(c.provider.value),Number(c.c.value)}t.total=0,t.uris=l;var data={labels:r,datasets:[{label:"Item",data:o,borderWidth:1}]},f={scales:{yAxes:[{ticks:{beginAtZero:TextTrackCue}}]},responsive:!0,maintainAspectRatio:!1,onClick:t.handle};t.renderChart(data,f)}))}}},h=n(103),component=Object(h.a)(c,void 0,void 0,!1,null,null,null);e.a=component.exports},543:function(t,e,n){"use strict";n.r(e);n(309),n(310),n(26),n(45),n(306),n(32),n(231),n(51);var r=n(16),o=n(27),l=n(36),c=n(42),h=n(35),f=n(28),m=n(13),d=n(179),v=n(118),y=n.n(v),j=n(510);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var O=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l},w=function(t){Object(c.a)(h,t);var e,n=_(h);function h(){var t;return Object(o.a)(this,h),(t=n.apply(this,arguments)).results={results_w_thumbnail:[]},t}return Object(l.a)(h,[{key:"watchU",value:function(){this.init()}},{key:"created",value:function(){this.init()}},{key:"init",value:function(){for(var t in this.results)this.results[t]=[];this.search()}},{key:"inStmt",value:function(t,u){return"spatial"===t?"?cho schema:spatial <".concat(u,">;"):"?cho schema:about <".concat(u,">;")}},{key:"outStmt",value:function(t){return'jps:agential\n          [jps:relationType/skos:broader?/rdfs:label "制作"; jps:value ?dest ] .'}},{key:"search",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,u,r,o,l,c,i,h,label,f,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.length>0&&void 0!==m[0]&&m[0],console.log({searchNoThumbFlag:e}),n=20,u=this.u,r=this.$i18n.locale,o="\n        SELECT distinct ?dest ?label ?thumbnail ?description ?name WHERE {\n          \n          ".concat(this.inStmt(this.in,u),"\n          ").concat(this.outStmt(this.out),"\n          \n          ").concat(e?"MINUS { ?dest schema:image ?thumbnail } ":"?dest schema:image ?thumbnail .","\n          ?dest rdfs:label ?label .\n          optional { ?dest schema:description ?description . }\n\n          ").concat("ja"===r?"":"OPTIONAL {?dest schema:name ?name . filter (lang(?name) = 'en')} OPTIONAL {?p schema:name ?p_name . filter (lang(?p_name) = 'en')}","\n        }\n        ORDER BY RAND()\n        LIMIT ").concat(n,"\n      "),t.next=8,y.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(o)+"&output=json");case 8:for(l=t.sent,c=l.data.results.bindings,i=0;i<c.length;i++)h=c[i],label=h.label.value,label=h.name?h.name.value:label,f={_id:h.dest.value,to:this.localePath({name:"item",query:{id:h.dest.value}}),_source:{_label:label,description:h.description?h.description.value:"",_url:h.dest.value,_thumbnail:h.thumbnail?h.thumbnail.value:"https://jpsearch.go.jp/assets/img/no-image/cultural-no-image-small_greylighter.png"}},this.results.results_w_thumbnail.push(f);!e&&c.length<10&&this.search(!0);case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),h}(d.Vue);O([Object(d.Prop)()],w.prototype,"u",void 0),O([Object(d.Prop)()],w.prototype,"in",void 0),O([Object(d.Prop)()],w.prototype,"out",void 0),O([Object(d.Watch)("u")],w.prototype,"watchU",null);var R=w=O([Object(d.Component)({components:{HorizontalItems:j.default}})],w),k=n(103),C=n(142),I=n.n(C),E=n(509),component=Object(k.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.results.results_w_thumbnail.length>0?n("v-container",[n("h2",{staticClass:"mt-5 mb-3 text-center"},[t._v(t._s(t.$t("Related "+t.out)))]),t._v(" "),n("HorizontalItems",{attrs:{data:t.results.results_w_thumbnail}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports;I()(component,{HorizontalItems:n(510).default}),I()(component,{VContainer:E.a})},544:function(t,e,n){"use strict";n.r(e);n(26),n(45),n(306),n(32),n(63),n(231),n(52),n(51);var r=n(16),o=n(27),l=n(36),c=n(42),h=n(35),f=n(28),m=n(13),d=n(179),v=n(118),y=n.n(v),j=n(510),_=n(535);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var w=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l},R=function(t){Object(c.a)(h,t);var e,n=O(h);function h(){var t;return Object(o.a)(this,h),(t=n.apply(this,arguments)).results={results_w_thumbnail:[]},t}return Object(l.a)(h,[{key:"watchU",value:function(){this.init()}},{key:"created",value:function(){this.init()}},{key:"init",value:function(){for(var t in this.results)this.results[t]=[];this.search()}},{key:"search",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,u,r,o,l,c,i,h,label,f,m,d,v=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=v.length>0&&void 0!==v[0]&&v[0],n=20,u=this.u,r=this.$i18n.locale,o="\n        SELECT distinct ?cho ?label ?thumbnail ?p ?p_label ?name ?p_name WHERE {\n          {\n            ?cho rdfs:label ?label;\n            ".concat("schema:spatial <"+u+"> .","\n          } \n          \n          ").concat(e?"MINUS { ?cho schema:image ?thumbnail } ":"?cho schema:image ?thumbnail .","\n          ?cho jps:sourceInfo ?sourceInfo .\n          ?sourceInfo schema:provider ?p .\n          optional { ?p rdfs:label ?p_label . } \n\n          ").concat("ja"===r?"":"OPTIONAL {?cho schema:name ?name . filter (lang(?name) = 'en')} OPTIONAL {?p schema:name ?p_name . filter (lang(?p_name) = 'en')}","\n        }\n        ORDER BY RAND()\n        LIMIT ").concat(n,"\n      "),t.next=8,y.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(o)+"&output=json");case 8:for(l=t.sent,c=l.data.results.bindings,i=0;i<c.length;i++)h=c[i],label=h.label.value,label=h.name?h.name.value:label,f=h.p.value.split("/"),m=h.p_label?h.p_label.value:f[f.length-1],m=h.p_name?h.p_name.value:m,d={_id:h.cho.value,href:h.cho.value.replace("/data/","/item/"),_source:{_label:label,description:m,_url:h.cho.value,_thumbnail:h.thumbnail?h.thumbnail.value:"https://jpsearch.go.jp/assets/img/no-image/curation-no-image_greylighter.png"}},this.results.results_w_thumbnail.push(d);!e&&c.length<10&&this.search(!0);case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"query",get:function(){var t=this.$i18n.locale,u=this.u;return"\n        PREFIX schema: <http://schema.org/>\n        PREFIX type: <https://jpsearch.go.jp/term/type/>\n        PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n        PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n        PREFIX owl: <http://www.w3.org/2002/07/owl#>\n        PREFIX dct: <http://purl.org/dc/terms/>\n        PREFIX hpdb: <https://w3id.org/hpdb/api/>\n        PREFIX sh: <http://www.w3.org/ns/shacl#>\n        SELECT (count(distinct ?cho) as ?c) ?pLabel ?name ?provider WHERE {\n          {\n            ?cho rdfs:label ?label;\n            ".concat("schema:spatial <"+u+"> .","\n          } \n\n          \n          \n          ?cho jps:sourceInfo ?source .\n\n          ?source schema:provider ?provider .\n          optional { ?provider rdfs:label ?pLabel . }\n\n          ").concat("ja"===t?"":'?provider schema:name ?name . filter(lang(?name) = "en")',"\n        }\n        group by ?pLabel ?name ?provider order by desc(?c)\n        LIMIT 10\n    ")}}]),h}(d.Vue);w([Object(d.Prop)()],R.prototype,"u",void 0),w([Object(d.Prop)()],R.prototype,"type",void 0),w([Object(d.Watch)("u")],R.prototype,"watchU",null);var k=R=w([Object(d.Component)({components:{HorizontalItems:j.default,Chart:_.a}})],R),C=n(103),I=n(142),E=n.n(I),x=n(218),P=n(509),component=Object(C.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.results.results_w_thumbnail.length>0?n("v-container",[n("h2",{staticClass:"mt-5 mb-3 text-center"},[t._v(t._s(t.$t("Items")))]),t._v(" "),n("HorizontalItems",{attrs:{data:t.results.results_w_thumbnail}}),t._v(" "),n("v-card",{staticClass:"my-5 pa-5",attrs:{flat:""}},[n("div",{staticClass:"text-center"},[n("small",[n("h3",{staticClass:"mb-5"},[t._v(t._s(t.$t("データベース（上位10件）")))])])]),t._v(" "),n("Chart",{attrs:{height:300,query:t.query,type:"keyword",u:t.u}})],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports;E()(component,{HorizontalItems:n(510).default,Chart:n(525).default}),E()(component,{VCard:x.a,VContainer:P.a})},545:function(t,e,n){"use strict";n.r(e);n(26),n(45),n(306),n(32),n(231),n(51);var r=n(16),o=n(27),l=n(36),c=n(42),h=n(35),f=n(28),m=n(13),d=n(179),v=n(118),y=n.n(v),j=n(510);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var O=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l},w=function(t){Object(c.a)(h,t);var e,n=_(h);function h(){var t;return Object(o.a)(this,h),(t=n.apply(this,arguments)).results={results_w_thumbnail:[]},t}return Object(l.a)(h,[{key:"watchU",value:function(){this.init()}},{key:"created",value:function(){this.init()}},{key:"init",value:function(){for(var t in this.results)this.results[t]=[];this.search()}},{key:"search",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var u,e,n,r,o,i,l,label,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.u,e=this.$i18n.locale,n="\n        SELECT DISTINCT ?keyword ?label ?name WHERE { \n          ".concat("?s schema:spatial <"+u+"> ."," \n          ?s schema:about ?keyword . \n          FILTER(?keyword != <").concat(u,"> ) . \n\n          ?keyword rdfs:label ?label . \n\n          ").concat("ja"===e?"":"OPTIONAL {?keyword schema:name ?name . filter (lang(?name) = 'en')}","\n        }\n        ORDER BY RAND()\n        LIMIT ").concat(20,"\n      "),t.next=7,y.a.get("https://jpsearch.go.jp/rdf/sparql?query="+encodeURIComponent(n)+"&output=json");case 7:for(r=t.sent,o=r.data.results.bindings,i=0;i<o.length;i++)l=o[i],label=l.label.value,label=l.name?l.name.value:label,c={_id:l.keyword.value,to:this.localePath({name:"keyword",query:{id:l.keyword.value}}),_source:{_label:label,_url:l.keyword.value,_thumbnail:l.thumbnail?l.thumbnail.value:"https://nakamura196.github.io/jpsearch2/img/icons/tag.png"}},this.results.results_w_thumbnail.push(c);case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),h}(d.Vue);O([Object(d.Prop)()],w.prototype,"u",void 0),O([Object(d.Prop)()],w.prototype,"type",void 0),O([Object(d.Watch)("u")],w.prototype,"watchU",null);var R=w=O([Object(d.Component)({components:{HorizontalItems:j.default}})],w),k=n(103),C=n(142),I=n.n(C),E=n(509),component=Object(k.a)(R,(function(){var t=this.$createElement,e=this._self._c||t;return this.results.results_w_thumbnail.length>0?e("v-container",[e("h2",{staticClass:"mt-5 mb-3 text-center"},[this._v(this._s(this.$t("Related Keywords")))]),this._v(" "),e("HorizontalItems",{attrs:{data:this.results.results_w_thumbnail}})],1):this._e()}),[],!1,null,null,null);e.default=component.exports;I()(component,{HorizontalItems:n(510).default}),I()(component,{VContainer:E.a})},580:function(t,e,n){"use strict";n.r(e);n(45),n(306),n(32),n(52);var r=n(27),o=n(36),l=n(42),c=n(35),h=n(28),f=n(13),m=n(179),d=n(511),v=n(517),y=n(545),j=n(544),_=n(543),O=n(516),w=n(515),R=n(514),k=n(518),C=n(534);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var E=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l},x=function(t){Object(l.a)(n,t);var e=I(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).endpoint="https://jpsearch.go.jp/rdf/sparql?query=",t.title=t.$t("Item"),t.id=null,t}return Object(o.a)(n,[{key:"watchR",value:function(){this.init()}},{key:"created",value:function(){this.init()}},{key:"init",value:function(){var t=this.$route.query.id+""||"https://jpsearch.go.jp/term/keyword/教会";this.id=t;var e=t.split("/");this.title=e[e.length-1]}},{key:"head",value:function(){return{title:this.title}}},{key:"type",get:function(){return this.$route.params.entity}},{key:"name",get:function(){var t=this.type;return"spatial"===t?"map":t}},{key:"items",get:function(){return[{text:this.$t("top"),disabled:!1,to:this.localePath({name:"index"})},{text:this.$t(this.type),disabled:!1,to:this.localePath({name:this.name})},{text:this.title+this.$t("の自動ギャラリー")}]}}]),n}(m.Vue);E([Object(m.Watch)("$route")],x.prototype,"watchR",null);var P=x=E([Object(m.Component)({components:{Grid:d.default,TargetAgent:v.default,EntityRelatedKeywords:y.default,EntityRelatedItems:j.default,EntityRelatedEntities:_.default,Event:O.default,Europeana:R.default,DPLA:k.default,Keywords:w.default,MapC:C.a}})],x),T=n(103),S=n(142),D=n.n(S),L=n(553),$=n(509),N=n(216),A=n(57),component=Object(T.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.id?n("div",[n("v-sheet",{attrs:{color:"grey lighten-2"}},[n("v-container",{staticClass:"py-4",attrs:{fluid:""}},[n("v-breadcrumbs",{staticClass:"py-0",attrs:{items:t.items},scopedSlots:t._u([{key:"divider",fn:function(){return[n("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}],null,!1,3681283568)})],1)],1),t._v(" "),n("TargetAgent",{staticClass:"mb-5",attrs:{u:t.id}}),t._v(" "),n("EntityRelatedKeywords",{staticClass:"mt-10 mb-5",attrs:{u:t.id,type:t.type}}),t._v(" "),n("Keywords",{staticClass:"mt-10 mb-5",attrs:{u:t.id}}),t._v(" "),n("EntityRelatedEntities",{staticClass:"mt-10 mb-5",attrs:{u:t.id,in:t.type,out:"agential"}}),t._v(" "),n("EntityRelatedItems",{staticClass:"mt-10 mb-5",attrs:{u:t.id,type:t.type}}),t._v(" "),n("Event",{staticClass:"mt-10 mb-5",attrs:{u:t.id}}),t._v(" "),n("MapC",{staticClass:"mt-10 mb-5",attrs:{u:t.id,type:t.type}}),t._v(" "),n("Europeana",{staticClass:"mt-10 mb-5",attrs:{u:t.id}}),t._v(" "),n("DPLA",{staticClass:"mt-10 mb-5",attrs:{u:t.id}}),t._v(" "),n("v-container",{staticClass:"my-10"},[n("div",{staticClass:"text-center"},[n("small",[n("h3",{staticClass:"mb-5"},[t._v(t._s(t.$t("二次利用について")))]),t._v(" "),"ja"==t.$i18n.locale?[n("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by/4.0/"}},[n("img",{staticStyle:{"border-width":"0"},attrs:{alt:"クリエイティブ・コモンズ・ライセンス",src:"https://i.creativecommons.org/l/by/4.0/88x31.png"}})]),n("br"),t._v("この作品は"),n("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by/4.0/"}},[t._v("クリエイティブ・コモンズ 表示 4.0 国際 ライセンス")]),t._v("の下に提供されています。\n        ")]:[n("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by/4.0/"}},[n("img",{staticStyle:{"border-width":"0"},attrs:{alt:"Creative Commons License",src:"https://i.creativecommons.org/l/by/4.0/88x31.png"}})]),n("br"),t._v("This work is licensed under a\n          "),n("a",{attrs:{rel:"license",href:"http://creativecommons.org/licenses/by/4.0/"}},[t._v("Creative Commons Attribution 4.0 International License")]),t._v(".\n        ")],t._v(" "),n("p",{staticClass:"mt-5"},[t._v(t._s(t.$t("ただし、画像は個々の権利表示による")))])],2)])])],1):t._e()}),[],!1,null,null,null);e.default=component.exports;D()(component,{TargetAgent:n(517).default,EntityRelatedKeywords:n(545).default,Keywords:n(515).default,EntityRelatedEntities:n(543).default,EntityRelatedItems:n(544).default,Event:n(516).default,Europeana:n(514).default,DPLA:n(518).default}),D()(component,{VBreadcrumbs:L.a,VContainer:$.a,VIcon:N.a,VSheet:A.a})}}]);